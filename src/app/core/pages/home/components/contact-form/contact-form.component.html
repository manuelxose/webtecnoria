<section
  class="contact-form-section section"
  id="contact-form"
  aria-label="Formulario de contacto"
>
  <div class="container">
    <div class="contact-form__wrapper">
      <!-- Left Column - Info -->
      <div class="contact-form__info">
        <h2 class="contact-form__title">
          Solicita tu <span class="text-gradient">Presupuesto</span>
        </h2>
        <p class="contact-form__subtitle">
          Cuéntanos tu proyecto y te respondemos en menos de 24 horas con una
          propuesta personalizada.
        </p>

        <div class="contact-form__details">
          <div class="contact-detail">
            <svg
              class="contact-detail__icon"
              width="24"
              height="24"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"
              />
            </svg>
            <div>
              <strong>Teléfono</strong>
              <p><a href="tel:+34682047802">682 04 78 02</a></p>
            </div>
          </div>

          <div class="contact-detail">
            <svg
              class="contact-detail__icon"
              width="24"
              height="24"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"
              />
              <path
                d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"
              />
            </svg>
            <div>
              <strong>Email</strong>
              <p>
                <a href="mailto:info@tecnoria.com">info&#64;tecnoria.com</a>
              </p>
            </div>
          </div>

          <div class="contact-detail">
            <svg
              class="contact-detail__icon"
              width="24"
              height="24"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
                clip-rule="evenodd"
              />
            </svg>
            <div>
              <strong>Ubicación</strong>
              <p>Galicia, España</p>
            </div>
          </div>
        </div>

        <div class="contact-form__badges">
          <div class="trust-badge">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"
              />
            </svg>
            +15 años experiencia
          </div>
          <div class="trust-badge">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"
              />
            </svg>
            +200 proyectos B2B
          </div>
          <div class="trust-badge">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"
              />
            </svg>
            Respuesta en 24h
          </div>
        </div>
      </div>

      <!-- Right Column - Form -->
      <div class="contact-form__form-wrapper">
        <!-- Success Message -->
        <div
          *ngIf="submitSuccess"
          class="alert alert-success"
          id="success-message"
        >
          <h4>¡Mensaje enviado correctamente!</h4>
          <p>
            Gracias por contactar con TecnoRia. Te responderemos en menos de 24
            horas.
          </p>
        </div>

        <!-- Error Message -->
        <div *ngIf="submitError" class="alert alert-error">
          <h4>Error al enviar el mensaje</h4>
          <p>Por favor, inténtalo de nuevo o llámanos al 682 04 78 02.</p>
        </div>

        <!-- Form -->
        <form
          [formGroup]="contactForm"
          (ngSubmit)="onSubmit()"
          class="contact-form__form"
          *ngIf="!submitSuccess"
        >
          <!-- Name -->
          <div class="form-group">
            <label class="form-label form-label-required" for="name"
              >Nombre completo</label
            >
            <input
              type="text"
              id="name"
              formControlName="name"
              class="form-control"
              [class.is-invalid]="f['name'].touched && f['name'].invalid"
              placeholder="Juan García"
            />
            <div
              class="invalid-feedback"
              *ngIf="f['name'].touched && f['name'].invalid"
            >
              El nombre es obligatorio (mínimo 2 caracteres)
            </div>
          </div>

          <!-- Email + Phone (Grid) -->
          <div class="form-row">
            <div class="form-group">
              <label class="form-label form-label-required" for="email"
                >Email</label
              >
              <input
                type="email"
                id="email"
                formControlName="email"
                class="form-control"
                [class.is-invalid]="f['email'].touched && f['email'].invalid"
                placeholder="juan@empresa.com"
              />
              <div
                class="invalid-feedback"
                *ngIf="f['email'].touched && f['email'].invalid"
              >
                Introduce un email válido
              </div>
            </div>

            <div class="form-group">
              <label class="form-label form-label-required" for="phone"
                >Teléfono</label
              >
              <input
                type="tel"
                id="phone"
                formControlName="phone"
                class="form-control"
                [class.is-invalid]="f['phone'].touched && f['phone'].invalid"
                placeholder="+34 600 000 000"
              />
              <div
                class="invalid-feedback"
                *ngIf="f['phone'].touched && f['phone'].invalid"
              >
                Introduce un teléfono válido
              </div>
            </div>
          </div>

          <!-- Company + Position -->
          <div class="form-row">
            <div class="form-group">
              <label class="form-label form-label-required" for="company"
                >Empresa</label
              >
              <input
                type="text"
                id="company"
                formControlName="company"
                class="form-control"
                [class.is-invalid]="
                  f['company'].touched && f['company'].invalid
                "
                placeholder="Mi Empresa S.L."
              />
              <div
                class="invalid-feedback"
                *ngIf="f['company'].touched && f['company'].invalid"
              >
                El nombre de empresa es obligatorio
              </div>
            </div>

            <div class="form-group">
              <label class="form-label" for="position">Cargo</label>
              <input
                type="text"
                id="position"
                formControlName="position"
                class="form-control"
                placeholder="Director General (opcional)"
              />
            </div>
          </div>

          <!-- Project Type -->
          <div class="form-group">
            <label class="form-label form-label-required" for="projectType"
              >Tipo de proyecto</label
            >
            <select
              id="projectType"
              formControlName="projectType"
              class="form-control"
              [class.is-invalid]="
                f['projectType'].touched && f['projectType'].invalid
              "
            >
              <option value="">Selecciona una opción...</option>
              <option *ngFor="let type of projectTypes" [value]="type">
                {{ type }}
              </option>
            </select>
            <div
              class="invalid-feedback"
              *ngIf="f['projectType'].touched && f['projectType'].invalid"
            >
              Selecciona el tipo de proyecto
            </div>
          </div>

          <!-- Budget + Timeline -->
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="budget"
                >Presupuesto estimado</label
              >
              <select id="budget" formControlName="budget" class="form-control">
                <option value="">Selecciona (opcional)...</option>
                <option *ngFor="let range of budgetRanges" [value]="range">
                  {{ range }}
                </option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label" for="timeline">Plazo deseado</label>
              <select
                id="timeline"
                formControlName="timeline"
                class="form-control"
              >
                <option value="">Selecciona (opcional)...</option>
                <option *ngFor="let time of timelines" [value]="time">
                  {{ time }}
                </option>
              </select>
            </div>
          </div>

          <!-- Message -->
          <div class="form-group">
            <label class="form-label form-label-required" for="message"
              >Cuéntanos tu proyecto</label
            >
            <textarea
              id="message"
              formControlName="message"
              class="form-textarea"
              rows="5"
              [class.is-invalid]="f['message'].touched && f['message'].invalid"
              placeholder="Describe tu proyecto, necesidades, problemas que quieres resolver... (mínimo 20 caracteres)"
            ></textarea>
            <div
              class="invalid-feedback"
              *ngIf="f['message'].touched && f['message'].invalid"
            >
              El mensaje debe tener al menos 20 caracteres
            </div>
          </div>

          <!-- Privacy -->
          <div class="form-check">
            <input
              type="checkbox"
              id="privacy"
              formControlName="privacy"
              class="form-check-input"
              [class.is-invalid]="f['privacy'].touched && f['privacy'].invalid"
            />
            <label class="form-check-label" for="privacy">
              Acepto la
              <a href="/politica-privacidad" target="_blank"
                >política de privacidad</a
              >
              y el tratamiento de mis datos
            </label>
            <div
              class="invalid-feedback"
              *ngIf="f['privacy'].touched && f['privacy'].invalid"
            >
              Debes aceptar la política de privacidad
            </div>
          </div>

          <!-- Submit -->
          <button
            type="submit"
            class="btn btn-primary btn-lg btn-block"
            [disabled]="isSubmitting"
            [class.btn-loading]="isSubmitting"
          >
            <span *ngIf="!isSubmitting">Enviar Solicitud</span>
            <span *ngIf="isSubmitting">Enviando...</span>
          </button>
        </form>
      </div>
    </div>
  </div>
</section>
